<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · Ghost</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Ghost</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Main</a></li><li><a class="tocitem" href="../trace/">Linearized traces</a></li><li><a class="tocitem" href="../tape/">Tape anatomy</a></li><li><a class="tocitem" href="../loops/">Loops</a></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li><a class="tocitem" href="#Public-API"><span>Public API</span></a></li><li><a class="tocitem" href="#Tape-execution"><span>Tape execution</span></a></li><li><a class="tocitem" href="#Internal-API"><span>Internal API</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dfdx/Ghost.jl/blob/master/docs/src/reference.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h2><h3 id="Tracing"><a class="docs-heading-anchor" href="#Tracing">Tracing</a><a id="Tracing-1"></a><a class="docs-heading-anchor-permalink" href="#Tracing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ghost.trace" href="#Ghost.trace"><code>Ghost.trace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">trace(f, args...; is_primitive, primitives)</code></pre><p>Trace function call, produce call value and a Tape.</p><p><code>trace</code> records to the tape primitive methods and recursively dives into non-primitives. There are 2 ways to tell <code>trace</code> that a particular method is a primitive:</p><ul><li>provide <code>is_primitive(sig) -&gt; Bool</code> function, where <code>sig</code> is   is a method signature, e.g. <code>Tuple{map(typeof, (f, args...))...}</code></li><li>provide an iterable <code>primitives</code>; in this case <code>trace</code> matches   all methods of this function</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L613-L626">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.is_primitive" href="#Ghost.is_primitive"><code>Ghost.is_primitive</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">is_primitive(sig)</code></pre><p>The default implementation of <code>is_primitive</code> argument in <a href="#Ghost.trace"><code>trace()</code></a>. Returns <code>true</code> if the method with the provided signature is defined in one of the Julia&#39;s built-in modules, e.g. <code>Base</code>, <code>Core</code>, <code>Broadcast</code>, etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L36-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.call_signature" href="#Ghost.call_signature"><code>Ghost.call_signature</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">call_signature(fn, args...)
call_signature(tape::Tape, op::Call)</code></pre><p>Get a signature of a function call. The obtain signature is suitable for <code>is_primitive(sig)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L556-L562">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.__new__" href="#Ghost.__new__"><code>Ghost.__new__</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">__new__(T, args...)</code></pre><p>User-level version of the <code>new()</code> pseudofunction. Can be used to construct most Julia types, including structs without default constructors, closures, etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/utils.jl#L1-L7">source</a></section></article><h3 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ghost.Variable" href="#Ghost.Variable"><code>Ghost.Variable</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Variable represents a reference to an operation on a tape. Variables can be used to index tape or keep reference to a specific operation on the tape.</p><p>Variables (also aliesed as <code>V</code>) can be:</p><ul><li>free, created as <code>V(id)</code> - used for indexing into tape</li><li>bound, created as <code>V(op)</code>` - used to keep a robust reference to an operation on the tape</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L10-L20">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.bound" href="#Ghost.bound"><code>Ghost.bound</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returned version of the var bound to the tape op</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L401">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.rebind!" href="#Ghost.rebind!"><code>Ghost.rebind!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rebind!(tape::Tape, op, st::Dict)
rebind!(tape::Tape, st::Dict; from, to)</code></pre><p>Rebind all variables according to substitution table. Example:</p><pre><code class="nohighlight hljs">tape = Tape()
v1, v2 = inputs!(tape, nothing, 3.0, 5.0)
v3 = push!(tape, mkcall(*, v1, 2))
st = Dict(v1.id =&gt; v2.id)
rebind!(tape, st)
@assert tape[v3].args[1].id == v2.id</code></pre><p>See also: rebind_context!()</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L405-L419">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.rebind_context!" href="#Ghost.rebind_context!"><code>Ghost.rebind_context!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rebind_context!(tape::Tape, st::Dict)</code></pre><p>Rebind variables in the tape&#39;s context according to substitution table. By default does nothing, but can be overwitten for specific Tape{C}</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L440-L445">source</a></section></article><h3 id="Tape-structure"><a class="docs-heading-anchor" href="#Tape-structure">Tape structure</a><a id="Tape-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Tape-structure" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ghost.Tape" href="#Ghost.Tape"><code>Ghost.Tape</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Linearized representation of a function execution.</p><p><strong>Fields</strong></p><ul><li><code>ops</code> - vector of operations on the tape</li><li><code>result</code> - variable pointing to the operation to be used as the result</li><li><code>parent</code> - parent tape if any</li><li><code>meta</code> - internal metadata</li><li><code>c</code> - application-specific context</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L185-L196">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.AbstractOp" href="#Ghost.AbstractOp"><code>Ghost.AbstractOp</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Base type for operations on a tape</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.Input" href="#Ghost.Input"><code>Ghost.Input</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Operation representing input data of a tape</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L91">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.Constant" href="#Ghost.Constant"><code>Ghost.Constant</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Operation representing a constant value on a tape</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.Call" href="#Ghost.Call"><code>Ghost.Call</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Operation represening function call on tape. Typically, calls are constructed using <a href="#Ghost.mkcall"><code>mkcall</code></a> function.</p><p>Important fields of a Call{T}:</p><ul><li><code>fn::T</code> - function or object to be called</li><li><code>args::Vector</code> - vector of variables or values used as arguments</li><li><code>val::Any</code> - the result of the function call</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L119-L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.Loop" href="#Ghost.Loop"><code>Ghost.Loop</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Operation representing a loop in an computational graph. See the online documentation for details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L378-L381">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.inputs" href="#Ghost.inputs"><code>Ghost.inputs</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Get list of a tape input variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L231">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.inputs!" href="#Ghost.inputs!"><code>Ghost.inputs!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Set values of a tape inputs</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L234">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.mkcall" href="#Ghost.mkcall"><code>Ghost.mkcall</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mkcall(fn, args...; val=missing)</code></pre><p>Convenient constructor for Call operation. If val is <code>missing</code> (default) and call value can be calculated from (bound) variables and constants, they are calculated. To prevent this behavior, set val to some neutral value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L156-L162">source</a></section></article><h3 id="Tape-transformations"><a class="docs-heading-anchor" href="#Tape-transformations">Tape transformations</a><a id="Tape-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Tape-transformations" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Base.push!" href="#Base.push!"><code>Base.push!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">push!(tape::Tape, op::AbstractOp)</code></pre><p>Push a new operation to the end of the tape.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L267-L271">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.insert!" href="#Base.insert!"><code>Base.insert!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">insert!(tape::Tape, idx::Integer, ops::AbstractOp...)</code></pre><p>Insert new operations into tape starting from position idx.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L280-L284">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.replace!" href="#Base.replace!"><code>Base.replace!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">replace!(tape, op  =&gt; new_ops; rebind_to=length(new_ops), old_new=Dict())</code></pre><p>Replace specified operation with 1 or more other operations, rebind variables in the reminder of the tape to ops[rebind_to].</p><p>Operation can be specified directly, by a variable or by ID.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L310-L317">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.deleteat!" href="#Base.deleteat!"><code>Base.deleteat!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">deleteat!(tape::Tape, idx; rebind_to = nothing)</code></pre><p>Remove <code>tape[V(idx)]</code> from the <code>tape</code>. If <code>rebind_to</code> is not <code>nothing</code>, then replace all references to <code>V(idx)</code> with <code>V(rebind_to)</code>.</p><p><code>idx</code> may be an index or <code>Variable</code>/<code>AbstractOp</code> directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L346-L354">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.primitivize!" href="#Ghost.primitivize!"><code>Ghost.primitivize!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">primitivize!(tape::Tape; is_primitive=is_primitive)</code></pre><p>Trace non-primitive function calls on a tape and decompose them into a list of corresponding primitive calls.</p><p><strong>Example</strong></p><pre><code class="nohighlight hljs">f(x) = 2x - 1
g(x) = f(x) + 5

tape = Tape()
_, x = inputs!(tape, g, 3.0)
y = push!(tape, mkcall(f, x))
z = push!(tape, mkcall(+, y, 5))
tape.result = z

primitivize!(tape)

# output

Tape{Dict{Any, Any}}
  inp %1::typeof(g)
  inp %2::Float64
  %3 = *(2, %2)::Float64
  %4 = -(%3, 1)::Float64
  %5 = +(%4, 5)::Float64</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L573-L600">source</a></section></article><h2 id="Tape-execution"><a class="docs-heading-anchor" href="#Tape-execution">Tape execution</a><a id="Tape-execution-1"></a><a class="docs-heading-anchor-permalink" href="#Tape-execution" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Ghost.play!" href="#Ghost.play!"><code>Ghost.play!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">play!(tape::Tape, args...; debug=false)</code></pre><p>Execute operations on the tape one by one. If <code>debug=true</code>, print each operation before execution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/tape.jl#L531-L536">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.compile" href="#Ghost.compile"><code>Ghost.compile</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compile(tape::Tape)</code></pre><p>Compile tape into a normal Julia function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/compile.jl#L100-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.to_expr" href="#Ghost.to_expr"><code>Ghost.to_expr</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">to_expr(tape::Tape)</code></pre><p>Generate a Julia expression corresponding to the tape.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/compile.jl#L72-L76">source</a></section></article><h3 id="Loops"><a class="docs-heading-anchor" href="#Loops">Loops</a><a id="Loops-1"></a><a class="docs-heading-anchor-permalink" href="#Loops" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ghost.should_trace_loops!" href="#Ghost.should_trace_loops!"><code>Ghost.should_trace_loops!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">should_trace_loops!(val=false)</code></pre><p>Turn on/off loop tracing. Without parameters, resets the flag to the default value</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L78-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.should_trace_loops" href="#Ghost.should_trace_loops"><code>Ghost.should_trace_loops</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">should_trace_loops()</code></pre><p>Check the current value of the loop tracing option.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L85-L89">source</a></section></article><h2 id="Internal-API"><a class="docs-heading-anchor" href="#Internal-API">Internal API</a><a id="Internal-API-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-API" title="Permalink"></a></h2><p>The following types and functions might be useful for better understanding of Ghost behavior, but are not part of the public API and may not hold backward compatibility guarantees.</p><article class="docstring"><header><a class="docstring-binding" id="Ghost.FunctionResolver" href="#Ghost.FunctionResolver"><code>Ghost.FunctionResolver</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Dict-like data structure which maps function signature to a value. Unlike real dict, getindex(rsv, sig) returns either exact match, or closest matching function signature. Example:</p><pre><code class="nohighlight hljs">rsv = FunctionResolver{Symbol}()
rsv[Tuple{typeof(sin), Float64}] = :Float64
rsv[Tuple{typeof(sin), Real}] = :Real
rsv[Tuple{typeof(sin), Number}] = :Number

rsv[Tuple{typeof(sin), Float64}]   # ==&gt; :Float64
rsv[Tuple{typeof(sin), Float32}]   # ==&gt; :Real</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/funres.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.Frame" href="#Ghost.Frame"><code>Ghost.Frame</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Frame of a call stack</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.TracerOptions" href="#Ghost.TracerOptions"><code>Ghost.TracerOptions</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Tracer options. Configured globally via the following methods:</p><ul><li>should<em>trace</em>loops!()</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L93-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost._LoopEnd" href="#Ghost._LoopEnd"><code>Ghost._LoopEnd</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Pseudo op to designate loop end. Removed after Loop op is created</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L272">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.record_or_recurse!" href="#Ghost.record_or_recurse!"><code>Ghost.record_or_recurse!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Record function call onto a tape or recurse into it.</p><p><strong>Params:</strong></p><ul><li>t::IRTracer - current tracer</li><li>res_id::Int - IR ID of the operation</li><li>farg_irvars - IR variables of the operation</li><li>fargs - values of the operation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L429-L438">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.push_frame!" href="#Ghost.push_frame!"><code>Ghost.push_frame!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Push a new call frame to tracer, setting function params accordingly</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L146">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.pop_frame!" href="#Ghost.pop_frame!"><code>Ghost.pop_frame!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Pop call frame from tracer</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L158">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.enter_loop!" href="#Ghost.enter_loop!"><code>Ghost.enter_loop!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Trigger loop start operations.</p><p><strong>Arguments:</strong></p><ul><li>t :: IRTracer  Current tracer</li><li>loop_id :: Int  Unique ID of a loop being entered</li><li>loop<em>input</em>ir_ids :: Vector{Int}  IR IDs of variables which will be used as loop inputs. Includes  loop block inputs and any outside IDs</li></ul><p>This function is added to the very beginning of the loop block(s). During the first iteration we initialize a subtape which will be used later to create the Loop operation on the parent tape. Since all iterations of the loop produce identical operations, we only need to trace it once. However, it turns out to be easier to record all iterations (seprated by a special _LoopEnd op) and then prune unused iterations.</p><p>Another important detail is that Loop&#39;s subtape is a completely valid and independent tape with its own call frame and inputs which include all explicit and implicit inputs to the loop&#39;s block in the original IR.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L288-L312">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.stop_loop_tracing!" href="#Ghost.stop_loop_tracing!"><code>Ghost.stop_loop_tracing!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Set flags designating the end of the first run of the loop.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L336-L338">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ghost.exit_loop!" href="#Ghost.exit_loop!"><code>Ghost.exit_loop!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Trigget loop end operations.</p><p>This function is added just before the end of the loop block. Since we record all iterations of the loop, we must remember tape IDs of continuation condition and exit variables during the first run.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dfdx/Ghost.jl/blob/94906dc9b9417e14ad94e4492e6664ed633090db/src/trace.jl#L365-L371">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Ghost.AbstractOp"><code>Ghost.AbstractOp</code></a></li><li><a href="#Ghost.Call"><code>Ghost.Call</code></a></li><li><a href="#Ghost.Constant"><code>Ghost.Constant</code></a></li><li><a href="#Ghost.Frame"><code>Ghost.Frame</code></a></li><li><a href="#Ghost.FunctionResolver"><code>Ghost.FunctionResolver</code></a></li><li><a href="#Ghost.Input"><code>Ghost.Input</code></a></li><li><a href="#Ghost.Loop"><code>Ghost.Loop</code></a></li><li><a href="#Ghost.Tape"><code>Ghost.Tape</code></a></li><li><a href="#Ghost.TracerOptions"><code>Ghost.TracerOptions</code></a></li><li><a href="#Ghost.Variable"><code>Ghost.Variable</code></a></li><li><a href="#Ghost._LoopEnd"><code>Ghost._LoopEnd</code></a></li><li><a href="#Base.deleteat!"><code>Base.deleteat!</code></a></li><li><a href="#Base.insert!"><code>Base.insert!</code></a></li><li><a href="#Base.push!"><code>Base.push!</code></a></li><li><a href="#Base.replace!"><code>Base.replace!</code></a></li><li><a href="#Ghost.__new__"><code>Ghost.__new__</code></a></li><li><a href="#Ghost.bound"><code>Ghost.bound</code></a></li><li><a href="#Ghost.call_signature"><code>Ghost.call_signature</code></a></li><li><a href="#Ghost.compile"><code>Ghost.compile</code></a></li><li><a href="#Ghost.enter_loop!"><code>Ghost.enter_loop!</code></a></li><li><a href="#Ghost.exit_loop!"><code>Ghost.exit_loop!</code></a></li><li><a href="#Ghost.inputs"><code>Ghost.inputs</code></a></li><li><a href="#Ghost.inputs!"><code>Ghost.inputs!</code></a></li><li><a href="#Ghost.is_primitive"><code>Ghost.is_primitive</code></a></li><li><a href="#Ghost.mkcall"><code>Ghost.mkcall</code></a></li><li><a href="#Ghost.play!"><code>Ghost.play!</code></a></li><li><a href="#Ghost.pop_frame!"><code>Ghost.pop_frame!</code></a></li><li><a href="#Ghost.primitivize!"><code>Ghost.primitivize!</code></a></li><li><a href="#Ghost.push_frame!"><code>Ghost.push_frame!</code></a></li><li><a href="#Ghost.rebind!"><code>Ghost.rebind!</code></a></li><li><a href="#Ghost.rebind_context!"><code>Ghost.rebind_context!</code></a></li><li><a href="#Ghost.record_or_recurse!"><code>Ghost.record_or_recurse!</code></a></li><li><a href="#Ghost.should_trace_loops"><code>Ghost.should_trace_loops</code></a></li><li><a href="#Ghost.should_trace_loops!"><code>Ghost.should_trace_loops!</code></a></li><li><a href="#Ghost.stop_loop_tracing!"><code>Ghost.stop_loop_tracing!</code></a></li><li><a href="#Ghost.to_expr"><code>Ghost.to_expr</code></a></li><li><a href="#Ghost.trace"><code>Ghost.trace</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../loops/">« Loops</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Wednesday 4 August 2021 16:23">Wednesday 4 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
